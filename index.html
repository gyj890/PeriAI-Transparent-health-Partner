<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PeriAI: Perimenopause Companion</title>
  <link rel="icon" type="image/jpeg" href="assets/logo.jpg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,600&family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>


  <!-- LOGIN OVERLAY -->
  <div id="loginOverlay">
    <div class="login-box">
      <div class="login-logo">
        <div class="login-logo-mark">
          <img src="assets/logo.jpg" alt="PeriAI logo"
            style="width:36px;height:36px;object-fit:cover;border-radius:10px;display:block">
        </div>
        <div class="login-logo-text">
          <span class="brand-main">PeriAI</span>
          <span class="brand-sub">Perimenopause Companion</span>
        </div>
      </div>
      <div class="login-title">Peri<span>AI</span></div>
    </div>
    <div class="login-tabs">
      <button class="login-tab active" id="tabLogin" onclick="switchAuthTab('login')">Sign In</button>
      <button class="login-tab" id="tabSignup" onclick="switchAuthTab('signup')">Create Account</button>
    </div>
    <div id="loginError" class="login-error"></div>
    <!-- Sign In form -->
    <div id="formLogin">
      <div class="login-field">
        <label>Email</label>
        <input type="email" id="loginEmail" placeholder="you@email.com" autocomplete="email"
          onkeydown="if(event.key==='Enter')document.getElementById('loginPassword').focus()">
      </div>
      <div class="login-field">
        <label>Password</label>
        <input type="password" id="loginPassword" placeholder="Enter your password" autocomplete="current-password"
          onkeydown="if(event.key==='Enter')doLogin()">
      </div>
      <button class="login-btn" onclick="doLogin()">Sign In</button>
    </div>
    <!-- Sign Up form -->
    <div id="formSignup" style="display:none">
      <div class="login-field">
        <label>Your Name</label>
        <input type="text" id="signupName" placeholder="First name">
      </div>
      <div class="login-field">
        <label>Email</label>
        <input type="email" id="signupEmail" placeholder="you@email.com" autocomplete="email">
      </div>
      <div class="login-field">
        <label>Password <span style="font-weight:500;color:var(--text-lt)">(min. 6 characters)</span></label>
        <input type="password" id="signupPassword" placeholder="Create a password" autocomplete="new-password">
      </div>
      <div class="login-field">
        <label>Confirm Password</label>
        <input type="password" id="signupConfirm" placeholder="Repeat your password" autocomplete="new-password"
          onkeydown="if(event.key==='Enter')doSignup()">
      </div>
      <button class="login-btn" onclick="doSignup()">Create Account</button>
    </div>
  </div>
  </div>

  <!-- HEADER -->
  <header class="topbar">
    <div class="logo-wrap" onclick="goTo('home')">
      <img src="assets/logo.jpg" alt="PeriAI logo"
        style="width:38px;height:38px;object-fit:cover;border-radius:50%;display:block;flex-shrink:0">
      <div>
        <div class="logo-text">Peri<span class="ai-part">AI</span></div>
        <div class="logo-tagline">Perimenopause Companion</div>
      </div>
    </div>
  </header>

  <nav class="nav-tabs">
    <button class="tab-btn active" id="tab-home" onclick="goTo('home')">Home</button>
    <button class="tab-btn" id="tab-about" onclick="goTo('about')">Cardio Symptoms</button>
    <button class="tab-btn" id="tab-profile" onclick="goTo('profile')">My Profile</button>
    <button class="tab-btn" id="tab-ai" onclick="goTo('ai')">Talk to Peri</button>
    <button class="tab-btn" id="tab-log" onclick="goTo('log')">Symptom Log</button>
    <button class="tab-btn" id="tab-reports" onclick="goTo('reports')">Reports</button>
    <button class="tab-btn" id="tab-risk" onclick="goTo('risk')">Risk Analysis</button>
  </nav>
  <div class="nav-right">
    <div class="session-pill">
      <div class="rec-dot" id="recDot"></div>
      <span id="sessionTimer">00:00</span>
    </div>
    <div id="userPill"
      style="display:none;align-items:center;gap:0.5rem;font-size:0.78rem;font-weight:800;color:var(--text-m);background:var(--cream);border:1.5px solid var(--border);border-radius:50px;padding:0.35rem 0.9rem 0.35rem 0.7rem;cursor:default">
    </div>
    <button class="btn-sm-s" style="font-size:0.75rem;padding:0.4rem 0.9rem" onclick="doLogout()">Sign Out</button>
    <button class="btn-cta" onclick="goTo('ai')">Start Session</button>
  </div>
  </header>

  <!-- APP BODY -->
  <div id="app">

    <!-- HOME -->
    <div class="section active" id="sec-home">
      <div class="home-hero">
        <h1>Your health,<br><em>finally heard.</em></h1>
        <p class="sub">Peri listens to your symptoms by voice, tracks everything over time, and builds a clinical report
          you can hand directly to your gynecologist.</p>
        <div class="hero-btns">
          <button class="btn-primary" onclick="goTo('ai')">Talk to Peri</button>
          <button class="btn-secondary" onclick="goTo('profile')">Set up my profile →</button>
        </div>
        <div class="home-stats">
          <div class="stat-pill">
            <div class="num" id="statS">0</div>
            <div class="lbl">Symptoms<br>Tracked</div>
          </div>
          <div class="stat-pill">
            <div class="num" id="statSess">0</div>
            <div class="lbl">Voice<br>Sessions</div>
          </div>
          <div class="stat-pill">
            <div class="num" id="statR">0</div>
            <div class="lbl">Reports<br>Generated</div>
          </div>
          <div class="stat-pill">
            <div class="num">16</div>
            <div class="lbl">Symptom<br>Categories</div>
          </div>
        </div>
      </div>
      <div class="feature-grid">
        <div class="feat-card c-peach" onclick="goTo('ai')">
          <h3>Talk to Peri</h3>
          <p>Describe how you feel in your own words. Peri asks the right clinical follow-up questions automatically.
          </p>
          <div class="fc-tag">Start a session →</div>
        </div>
        <div class="feat-card c-lav" onclick="goTo('log')">
          <h3>Symptom Log</h3>
          <p>Track all 16 perimenopause symptoms by severity and frequency. Updated anytime, stored locally.</p>
          <div class="fc-tag">Open log →</div>
        </div>
        <div class="feat-card c-sage" onclick="goTo('reports')">
          <h3>Clinical Reports</h3>
          <p>Download a structured report for your OB-GYN with risk flags, discussion points, and an AI summary.</p>
          <div class="fc-tag">View reports →</div>
        </div>
        <div class="feat-card c-blush" onclick="goTo('profile')">
          <h3>My Profile</h3>
          <p>Add your medical history, medications, and doctor info so Peri can personalise your experience.</p>
          <div class="fc-tag">Complete profile →</div>
        </div>
        <div class="feat-card c-yel" onclick="goTo('about')">
          <h3>Cardio Symptoms</h3>
          <p>Learn the 10 cardiovascular warning signs women most often miss, and why they look so different from men's
            symptoms.</p>
          <div class="fc-tag">Learn more →</div>
        </div>
        <div class="feat-card c-sky">
          <h3>Risk Detection</h3>
          <p>Peri automatically flags high-priority symptoms including palpitations and postmenopausal bleeding in every
            report.</p>
          <div class="fc-tag" style="color:var(--text-lt);font-weight:600">Built-in</div>
        </div>
      </div>
    </div>

    <!-- ABOUT -->
    <div class="section" id="sec-about">
      <div class="page-wrap">
        <h1 class="page-title">Cardiovascular <em>Symptoms</em></h1>
        <p class="page-sub">Heart disease is the number one killer of women in perimenopause. As estrogen drops,
          cardiovascular risk rises sharply. These are the warning signs your body may be sending.</p>
        <div
          style="background:var(--peach-lt);border:1.5px solid var(--peach);border-radius:18px;padding:1.4rem 1.8rem;margin-bottom:1.6rem">
          <strong style="display:block;font-size:0.9rem;font-weight:800;color:var(--rose);margin-bottom:0.6rem">Why
            perimenopause raises your heart risk</strong>
          <p style="font-size:0.84rem;color:var(--text-m);line-height:1.85">Estrogen is a natural protector of the
            cardiovascular system. It keeps arteries flexible, helps regulate cholesterol, and supports healthy blood
            pressure. When estrogen begins to decline during perimenopause, that protection erodes. LDL cholesterol
            rises. HDL cholesterol falls. Blood pressure climbs. Arterial walls stiffen. The American Heart Association
            estimates that cardiovascular disease risk in women doubles in the decade after menopause begins. Most women
            are never told this.</p>
        </div>
        <div class="about-grid">
          <div class="a-card">
            <h3>Chest Pain or Pressure</h3>
            <p>In women, cardiac chest pain is often described as tightness, heaviness, or a subtle ache rather than the
              sharp crushing sensation shown in movies. During perimenopause, chest discomfort is frequently dismissed
              as anxiety or reflux. If it comes on with exertion or stress and eases with rest, take it seriously.</p>
          </div>
          <div class="a-card">
            <h3>Shortness of Breath</h3>
            <p>Feeling winded climbing stairs or doing things that used to be easy is a classic early warning sign of
              heart disease in women. It can occur with or without chest pain. Because fatigue and breathlessness also
              appear in perimenopause, this symptom is routinely attributed to hormones and missed as a cardiac sign.
            </p>
          </div>
          <div class="a-card">
            <h3>Heart Palpitations</h3>
            <p>A racing, fluttering, or irregular heartbeat becomes more common in perimenopause as estrogen fluctuates.
              While most palpitations are harmless hormonal responses, frequent episodes or those paired with dizziness
              or shortness of breath warrant an ECG to rule out arrhythmia.</p>
          </div>
          <div class="a-card">
            <h3>Unusual Fatigue</h3>
            <p>Crushing, persistent fatigue that does not improve with rest is one of the most commonly reported
              symptoms in women who later experience a cardiac event, sometimes appearing weeks beforehand. Because
              fatigue is also a hallmark of perimenopause and thyroid dysfunction, it is almost never flagged as a
              potential heart symptom in women.</p>
          </div>
          <div class="a-card">
            <h3>Nausea and Indigestion</h3>
            <p>Unexplained nausea, stomach discomfort, or a persistent feeling of indigestion without an obvious
              food-related cause can be cardiac in origin. These symptoms are frequently the primary or only signs of a
              heart attack in women and are consistently dismissed.</p>
          </div>
          <div class="a-card">
            <h3>Dizziness and Lightheadedness</h3>
            <p>Sudden dizziness or feeling faint can signal reduced blood flow from a cardiac arrhythmia or blocked
              artery. The drop in estrogen during perimenopause affects blood vessel tone and pressure regulation,
              making the cardiovascular system more vulnerable.</p>
          </div>
          <div class="a-card">
            <h3>Pain in Arm, Jaw, or Back</h3>
            <p>Cardiac pain frequently radiates in women, traveling to the left arm, both arms, the jaw, neck, upper
              back, or between the shoulder blades. Many women who have heart attacks report only back or jaw pain, no
              chest pain at all.</p>
          </div>
          <div class="a-card">
            <h3>Swelling in Legs or Feet</h3>
            <p>Fluid buildup in the ankles, feet, or legs can indicate heart failure, where the heart is not pumping
              efficiently enough to prevent pooling in the lower body. The loss of estrogen's protective effects on the
              heart muscle and blood vessels during perimenopause contributes to this risk.</p>
          </div>
          <div class="a-card">
            <h3>Sweating Without Cause</h3>
            <p>Breaking into a cold, clammy sweat without a clear reason is a recognized cardiac warning sign. This is
              distinct from the hot flashes of perimenopause. Menopausal hot flashes originate from hormonal signaling;
              cardiac sweating tends to feel more like a stress response and often accompanies chest discomfort or
              nausea.</p>
          </div>
          <div class="a-card">
            <h3>Brain Fog and Sudden Confusion</h3>
            <p>Sudden confusion, difficulty speaking, or a dramatic shift in mental clarity can indicate reduced blood
              flow to the brain from a cardiac event or early stroke. Cardiovascular disease and stroke risk both
              increase significantly in the years following menopause.</p>
          </div>
        </div>
        <div
          style="background:var(--blush-lt);border:1.5px solid var(--blush);border-radius:18px;padding:1.4rem 1.8rem;margin-bottom:1.2rem">
          <strong style="display:block;font-size:0.9rem;font-weight:800;color:var(--rose);margin-bottom:0.5rem">Why
            women are consistently underdiagnosed</strong>
          <p style="font-size:0.83rem;color:var(--text-m);line-height:1.85">Women's cardiac symptoms are consistently
            different from men's, and consistently missed. Most cardiovascular research was historically conducted on
            male subjects. Women are more likely to present with fatigue, nausea, jaw pain, and back pain rather than
            chest clutching. In perimenopause, these symptoms overlap with hormonal changes, making them even easier to
            dismiss. Tracking and documenting your symptoms over time, and bringing that record to your doctor, is one
            of the most effective things you can do.</p>
        </div>
        <div class="disclaimer-card">
          <strong>If you think you are having a heart attack, call 911 immediately</strong>
          <p>Do not drive yourself. Do not wait to see if it passes. Time is muscle. Peri is an AI companion designed to
            help you track and communicate symptoms with your doctor. She is not a diagnostic tool and cannot replace
            emergency medical care.</p>
        </div>
      </div>
    </div>

    <!-- PROFILE -->
    <div class="section" id="sec-profile">
      <div class="page-wrap" style="max-width:780px">
        <h1 class="page-title">My <em>Profile</em></h1>
        <p class="page-sub">Peri uses this to assess your cardiovascular risk. Fields map directly to the CVD prediction
          dataset.</p>

        <div class="profile-card" style="margin-bottom:1.4rem">
          <div class="profile-section-head">
            <div class="profile-section-title">Objective Features</div>
            <div class="profile-section-sub">Measured: age, body, blood pressure</div>
          </div>
          <div class="fgrp" style="margin-bottom:1rem">
            <label>First Name</label>
            <input type="text" id="pName" placeholder="e.g. Sarah">
          </div>
          <div class="field-row">
            <div class="field-meta">
              <div>
                <div class="field-label">Age <span class="field-var">age</span></div>
                <div class="field-type">Objective, int (years)</div>
              </div>
            </div>
            <div class="fgrp" style="flex:1"><input type="number" id="pAge" placeholder="e.g. 47" min="18" max="100">
            </div>
          </div>
          <div class="field-row">
            <div class="field-meta">
              <div>
                <div class="field-label">Height <span class="field-var">height</span></div>
                <div class="field-type">Objective, cm</div>
              </div>
            </div>
            <div class="fgrp" style="flex:1">
              <div style="display:flex;gap:0.5rem">
                <input type="number" id="pHeightVal" placeholder="e.g. 165" style="flex:1">
                <select id="pHeightUnit" style="width:82px">
                  <option value="cm">cm</option>
                  <option value="ft">ft / in</option>
                </select>
              </div>
              <div id="heightFtIn" style="display:none;margin-top:0.45rem">
                <div style="display:flex;gap:0.5rem">
                  <input type="number" id="pHeightFt" placeholder="ft" style="flex:1">
                  <input type="number" id="pHeightIn" placeholder="in" style="flex:1">
                </div>
              </div>
            </div>
          </div>
          <div class="field-row">
            <div class="field-meta">
              <div>
                <div class="field-label">Weight <span class="field-var">weight</span></div>
                <div class="field-type">Objective, float (kg)</div>
              </div>
            </div>
            <div class="fgrp" style="flex:1">
              <div style="display:flex;gap:0.5rem">
                <input type="number" id="pWeightVal" placeholder="e.g. 68" style="flex:1" step="0.1">
                <select id="pWeightUnit" style="width:82px">
                  <option value="kg">kg</option>
                  <option value="lbs">lbs</option>
                </select>
              </div>
            </div>
          </div>
          <div id="bmiDisplay"
            style="display:none;margin:0 0 0.5rem 0;padding:0.7rem 1rem;background:var(--peach-lt);border:1.5px solid var(--peach);border-radius:10px;font-size:0.83rem;font-weight:700;color:var(--text-m)">
          </div>
          <div class="field-row">
            <div class="field-meta">
              <div>
                <div class="field-label">Gender <span class="field-var">gender</span></div>
                <div class="field-type">Objective, categorical</div>
              </div>
            </div>
            <div style="flex:1;display:flex;gap:0.5rem;flex-wrap:wrap;align-items:center">
              <button class="toggle-btn" id="gn-f"
                onclick="selectToggle('gender','Female',['gn-f','gn-m','gn-o'])">Female</button>
              <button class="toggle-btn" id="gn-m"
                onclick="selectToggle('gender','Male',['gn-f','gn-m','gn-o'])">Male</button>
              <button class="toggle-btn" id="gn-o"
                onclick="selectToggle('gender','Other',['gn-f','gn-m','gn-o'])">Other</button>
            </div>
          </div>
          <div class="field-row">
            <div class="field-meta">
              <div>
                <div class="field-label">Systolic BP <span class="field-var">ap_hi</span></div>
                <div class="field-type">Examination, int (mmHg)</div>
              </div>
            </div>
            <div class="fgrp" style="flex:1"><input type="number" id="pSystolic" placeholder="e.g. 120" min="70"
                max="250"></div>
          </div>
          <div class="field-row">
            <div class="field-meta">
              <div>
                <div class="field-label">Diastolic BP <span class="field-var">ap_lo</span></div>
                <div class="field-type">Examination, int (mmHg)</div>
              </div>
            </div>
            <div class="fgrp" style="flex:1"><input type="number" id="pDiastolic" placeholder="e.g. 80" min="40"
                max="150"></div>
          </div>
          <div id="bpDisplay"
            style="display:none;margin:0 0 0.5rem 0;padding:0.7rem 1rem;border-radius:10px;font-size:0.83rem;font-weight:700">
          </div>
          <div class="field-row">
            <div class="field-meta">
              <div>
                <div class="field-label">Cholesterol <span class="field-var">cholesterol</span></div>
                <div class="field-type">Examination, 1 / 2 / 3</div>
              </div>
            </div>
            <div style="flex:1;display:flex;gap:0.5rem;flex-wrap:wrap;align-items:center">
              <button class="toggle-btn" id="ch-1" onclick="selectToggle('cholesterol','1',['ch-1','ch-2','ch-3'])">1:
                Normal</button>
              <button class="toggle-btn" id="ch-2" onclick="selectToggle('cholesterol','2',['ch-1','ch-2','ch-3'])">2:
                Above normal</button>
              <button class="toggle-btn" id="ch-3" onclick="selectToggle('cholesterol','3',['ch-1','ch-2','ch-3'])">3:
                Well above normal</button>
            </div>
          </div>
          <div class="field-row">
            <div class="field-meta">
              <div>
                <div class="field-label">Glucose <span class="field-var">gluc</span></div>
                <div class="field-type">Examination, 1 / 2 / 3</div>
              </div>
            </div>
            <div style="flex:1;display:flex;gap:0.5rem;flex-wrap:wrap;align-items:center">
              <button class="toggle-btn" id="gl-1" onclick="selectToggle('glucose','1',['gl-1','gl-2','gl-3'])">1:
                Normal</button>
              <button class="toggle-btn" id="gl-2" onclick="selectToggle('glucose','2',['gl-1','gl-2','gl-3'])">2: Above
                normal</button>
              <button class="toggle-btn" id="gl-3" onclick="selectToggle('glucose','3',['gl-1','gl-2','gl-3'])">3: Well
                above normal</button>
            </div>
          </div>
        </div>

        <div class="profile-card" style="margin-bottom:1.4rem">
          <div class="profile-section-head">
            <div class="profile-section-title">Subjective Features</div>
            <div class="profile-section-sub">Self-reported: lifestyle factors</div>
          </div>
          <div class="field-row">
            <div class="field-meta">
              <div>
                <div class="field-label">Smoking <span class="field-var">smoke</span></div>
                <div class="field-type">Subjective, binary</div>
              </div>
            </div>
            <div style="flex:1;display:flex;gap:0.5rem;flex-wrap:wrap;align-items:center">
              <button class="toggle-btn" id="sm-0" onclick="selectToggle('smoking','0',['sm-0','sm-1'])">No</button>
              <button class="toggle-btn" id="sm-1" onclick="selectToggle('smoking','1',['sm-0','sm-1'])">Yes</button>
            </div>
          </div>
          <div class="field-row">
            <div class="field-meta">
              <div>
                <div class="field-label">Alcohol intake <span class="field-var">alco</span></div>
                <div class="field-type">Subjective, binary</div>
              </div>
            </div>
            <div style="flex:1;display:flex;gap:0.5rem;flex-wrap:wrap;align-items:center">
              <button class="toggle-btn" id="al-0" onclick="selectToggle('alcohol','0',['al-0','al-1'])">No</button>
              <button class="toggle-btn" id="al-1" onclick="selectToggle('alcohol','1',['al-0','al-1'])">Yes</button>
            </div>
          </div>
          <div class="field-row" style="border-bottom:none;margin-bottom:0;padding-bottom:0">
            <div class="field-meta">
              <div>
                <div class="field-label">Physical activity <span class="field-var">active</span></div>
                <div class="field-type">Subjective, binary</div>
              </div>
            </div>
            <div style="flex:1;display:flex;gap:0.5rem;flex-wrap:wrap;align-items:center">
              <button class="toggle-btn" id="pa-1"
                onclick="selectToggle('physActivity','1',['pa-1','pa-0'])">Yes</button>
              <button class="toggle-btn" id="pa-0"
                onclick="selectToggle('physActivity','0',['pa-1','pa-0'])">No</button>
            </div>
          </div>
        </div>

        <div class="profile-card" style="margin-bottom:1.4rem">
          <div class="profile-section-head">
            <div class="profile-section-title">Target Variable</div>
            <div class="profile-section-sub">Cardiovascular disease status</div>
          </div>
          <div class="field-row" style="border-bottom:none;margin-bottom:0;padding-bottom:0">
            <div class="field-meta">
              <div>
                <div class="field-label">Cardiovascular disease <span class="field-var">cardio</span></div>
                <div class="field-type">Target variable, binary</div>
              </div>
            </div>
            <div style="flex:1;display:flex;gap:0.5rem;flex-wrap:wrap;align-items:center">
              <button class="toggle-btn" id="cv-0" onclick="selectToggle('cardio','0',['cv-0','cv-1'])">Not
                present</button>
              <button class="toggle-btn" id="cv-1" onclick="selectToggle('cardio','1',['cv-0','cv-1'])">Present /
                diagnosed</button>
            </div>
          </div>
        </div>

        <div class="profile-card">
          <div class="profile-section-head">
            <div class="profile-section-title">Menstrual & Medical History</div>
            <div class="profile-section-sub">Perimenopause context for Peri's conversations</div>
          </div>
          <div class="form-grid">
            <div class="fgrp">
              <label>Menstrual Status</label>
              <select id="pMenStatus">
                <option value="">Select…</option>
                <option>Regular periods</option>
                <option>Irregular periods (perimenopause)</option>
                <option>No period for 1–11 months</option>
                <option>No period 12+ months (menopause)</option>
                <option>Surgical menopause</option>
              </select>
            </div>
            <div class="fgrp"><label>Date of Last Period</label><input type="month" id="pLastPeriod"></div>
          </div>
          <div class="fgrp" style="margin:0.9rem 0">
            <label>Current Medications / HRT</label>
            <input type="text" id="pMeds" placeholder="e.g. estradiol patch, levothyroxine, none…">
          </div>
          <div class="fgrp" style="margin-bottom:0.9rem">
            <label>Medical Conditions <span style="font-weight:500;color:var(--text-lt)">(select all that
                apply)</span></label>
            <div class="cond-grid" id="condGrid"></div>
          </div>
          <div class="fgrp" style="margin-bottom:0.9rem">
            <label>Family History</label>
            <textarea id="pFamHistory"
              placeholder="e.g. mother had early menopause, father had heart attack at 55…"></textarea>
          </div>
          <div class="fgrp">
            <label>OB-GYN / Doctor's Name</label>
            <input type="text" id="pDoctor" placeholder="Dr. Patel">
          </div>
          <div class="save-row">
            <button class="btn-primary" onclick="saveProfile()">Save Profile</button>
            <span class="saved-msg" id="savedMsg">Saved successfully!</span>
          </div>
        </div>
      </div>
    </div>

    <!-- AI VOICE -->
    <div class="section" id="sec-ai">
      <div class="ai-layout">
        <div class="orb-col">
          <div class="orb-title">Peri<span class="orb-ai">AI</span></div>
          <div class="orb-sub">tap the orb to speak</div>
          <div class="orb-wrap idle" id="orbWrap" onclick="handleOrbClick()">
            <div class="orb-glow"></div>
            <div class="orb-ring"></div>
            <div class="orb-ring"></div>
            <div class="orb-ring"></div>
            <div class="orb-core">
              <div class="orb-waves">
                <div class="wave" style="--d:.55s;--dl:0s"></div>
                <div class="wave" style="--d:.7s;--dl:.08s"></div>
                <div class="wave" style="--d:.45s;--dl:.16s"></div>
                <div class="wave" style="--d:.8s;--dl:.05s"></div>
                <div class="wave" style="--d:.6s;--dl:.2s"></div>
                <div class="wave" style="--d:.5s;--dl:.12s"></div>
                <div class="wave" style="--d:.65s;--dl:.25s"></div>
              </div>
              <div class="orb-emoji" id="orbEmoji"></div>
            </div>
          </div>
          <div class="orb-state" id="orbState">Tap to begin</div>
          <div class="orb-hint" id="orbHint">click to start listening</div>
          <div id="interviewProgressWrap" style="width:100%;margin-top:1rem;display:none">
            <div style="font-size:0.7rem;font-weight:700;color:var(--text-lt);text-align:center;margin-bottom:0.4rem"
              id="interviewProgressLabel"></div>
            <div style="height:5px;background:var(--border);border-radius:50px;overflow:hidden">
              <div id="interviewProgressFill"
                style="height:100%;background:linear-gradient(90deg,var(--peach),var(--rose));border-radius:50px;width:0%;transition:width 0.4s ease">
              </div>
            </div>
          </div>
          <div class="orb-btns">
            <div class="orb-btn-row">
              <button class="orb-btn" onclick="saveToLog()">Save to Log</button>
              <button class="orb-btn" onclick="buildAndGoReport()">Report</button>
            </div>
            <button class="orb-btn" style="width:100%;margin-top:0" onclick="endSession()">End Session</button>
          </div>
        </div>
        <div class="transcript-col">
          <div class="transcript-header">
            <h2>Conversation</h2>
            <span class="live-badge badge-idle" id="liveBadge">idle</span>
            <span style="margin-left:auto;font-size:0.75rem;font-weight:600;color:var(--text-lt)">stays on your device
              only</span>
          </div>
          <div class="messages" id="messages"></div>
          <div class="interim-bar" id="interimBar">…</div>
        </div>
      </div>
    </div>

    <!-- SYMPTOM LOG -->
    <div class="section" id="sec-log">
      <div class="page-wrap" style="max-width:1100px">
        <h1 class="page-title">Symptom <em>Log</em></h1>
        <p class="page-sub" id="logDateLbl">Track severity and frequency for each symptom category.</p>
        <div class="sym-grid" id="symGrid"></div>
        <div class="log-footer">
          <span class="log-date" id="logDateSub"></span>
          <div style="display:flex;gap:0.8rem;flex-wrap:wrap">
            <button class="btn-secondary" onclick="clearLog()">Clear All</button>
            <button class="btn-primary" onclick="buildAndGoReport()">Generate Report →</button>
          </div>
        </div>
      </div>
    </div>

    <!-- REPORTS -->
    <div class="section" id="sec-reports">
      <div class="page-wrap" style="max-width:860px">
        <h1 class="page-title">My <em>Reports</em></h1>
        <p class="page-sub">Download and share with your doctor. Includes risk flags, discussion points, and an AI
          clinical summary.</p>
        <div class="rpt-toolbar">
          <span class="rpt-count" id="rptCount">No reports yet</span>
          <div style="display:flex;gap:0.7rem;flex-wrap:wrap">
            <button class="btn-secondary" onclick="clearAllReports()">Clear All</button>
            <button class="btn-primary" onclick="buildReport()">+ New Report</button>
          </div>
        </div>
        <div class="rpt-list" id="rptList"></div>
      </div>
    </div>

  </div><!-- end #app -->

  <!-- RISK ANALYSIS -->
  <div class="section" id="sec-risk" style="display:none">
    <div class="page-wrap" style="max-width:900px">
      <h1 class="page-title">Risk <em>Analysis</em></h1>
      <p class="page-sub">Your cardiovascular risk score combines your clinical profile with symptom signals from your
        Peri conversations.</p>
      <div id="riskRunWrap" style="text-align:center;padding:2rem 0 1rem">
        <button class="btn-primary" style="font-size:1rem;padding:0.9rem 2.5rem" onclick="runRiskAnalysis()">Calculate
          My Risk Score</button>
        <p style="margin-top:0.8rem;font-size:0.78rem;color:var(--text-lt);font-weight:600">Uses your saved profile and
          symptom log. All computation happens in your browser.</p>
      </div>
      <div id="riskResults" style="display:none">
        <div style="display:grid;grid-template-columns:260px 1fr;gap:1.6rem;margin-bottom:1.6rem;align-items:start">
          <div class="risk-card" style="text-align:center;padding:1.8rem 1rem">
            <div
              style="font-size:0.72rem;font-weight:800;letter-spacing:0.1em;text-transform:uppercase;color:var(--text-lt);margin-bottom:1rem">
              Overall Risk Score</div>
            <canvas id="gaugeCanvas" width="220" height="130" style="display:block;margin:0 auto"></canvas>
            <div id="gaugeScore"
              style="font-size:2.8rem;font-weight:900;margin-top:0.5rem;font-family:'Playfair Display',serif"></div>
            <div id="gaugePct" style="font-size:0.8rem;font-weight:700;color:var(--text-lt);margin-bottom:0.4rem"></div>
            <div id="gaugeLabel"
              style="display:inline-block;font-size:0.78rem;font-weight:800;padding:0.3rem 1rem;border-radius:50px;letter-spacing:0.05em">
            </div>
          </div>
          <div class="risk-card">
            <div
              style="font-size:0.72rem;font-weight:800;letter-spacing:0.1em;text-transform:uppercase;color:var(--text-lt);margin-bottom:1rem">
              Score Breakdown</div>
            <div id="breakdownBars"></div>
            <div
              style="margin-top:1.2rem;padding-top:1rem;border-top:1px solid var(--border);font-size:0.78rem;color:var(--text-lt);line-height:1.7">
              <strong style="color:var(--text-m)">How this is calculated:</strong> Your structural risk is computed
              using a logistic regression model. Symptom signals reported to Peri adjust the final score by up to 20
              points.
            </div>
          </div>
        </div>
        <div class="risk-card" style="margin-bottom:1.6rem">
          <div style="display:flex;justify-content:space-between;align-items:baseline;margin-bottom:1.2rem">
            <div
              style="font-size:0.72rem;font-weight:800;letter-spacing:0.1em;text-transform:uppercase;color:var(--text-lt)">
              Symptom Contributions</div>
            <div style="font-size:0.72rem;font-weight:600;color:var(--text-lt)" id="symptomChartNote"></div>
          </div>
          <div id="symptomBars"></div>
        </div>
        <div class="risk-card" style="margin-bottom:1.6rem">
          <div
            style="font-size:0.72rem;font-weight:800;letter-spacing:0.1em;text-transform:uppercase;color:var(--text-lt);margin-bottom:1.2rem">
            Clinical Risk Factors</div>
          <canvas id="radarCanvas" width="420" height="280" style="display:block;margin:0 auto;max-width:100%"></canvas>
        </div>
        <div class="risk-card" id="riskExplain" style="margin-bottom:1.6rem"></div>
        <div class="risk-card" id="riskRecs"></div>
        <div class="disclaimer-card" style="margin-top:1.4rem">
          <strong>This is not a medical diagnosis</strong>
          <p>This risk score is an educational tool based on population-level data. It cannot diagnose cardiovascular
            disease. Always discuss your results with a qualified healthcare provider.</p>
        </div>
      </div>
      <div id="riskEmpty" style="display:none;text-align:center;padding:3rem 1rem">
        <div style="font-size:0.9rem;font-weight:700;color:var(--text-m);margin-bottom:0.5rem">Complete your profile
          first</div>
        <div style="font-size:0.82rem;color:var(--text-lt);margin-bottom:1.5rem">Age, blood pressure, and cholesterol
          are required to calculate your risk score.</div>
        <button class="btn-primary" onclick="goTo('profile')">Go to My Profile</button>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="footer-love">Made for women navigating perimenopause</div>
    <div class="footer-links">
      <a href="#" onclick="goTo('about')">About</a>
      <a href="#">Privacy</a>
      <a href="#">Help</a>
    </div>
  </footer>



  <!-- Load order matters: ML first, then data, then UI, then auth+init last -->
  <script src="api/predict.py"></script>
  <script src="js/symptoms.js"></script>
  <script src="js/app.js"></script>
  <script src="js/profile.js"></script>
  <script src="js/session.js"></script>
  <script src="js/symptoms_log.js"></script>
  <script src="js/reports.js"></script>
  <script src="js/auth.js"></script>

</body>

</html>